<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MR7 Snake Game - Premium</title>

<style>
body{
  margin:0;
  padding:0;
  background:black;
  font-family:Segoe UI, Arial;
  color:#00ff00;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  height:100vh;
  overflow:hidden;
}

h2{
  margin:10px;
  text-shadow:0 0 10px #00ff00;
}

#scoreBox{
  font-size:18px;
  margin-bottom:10px;
  padding:10px 20px;
  border:2px solid #00ff00;
  border-radius:12px;
  box-shadow:0 0 15px #00ff00;
  background:#111;
}

canvas{
  border:2px solid #00ff00;
  border-radius:15px;
  background:#050505;
  box-shadow:0 0 30px #00ff00;
}

.controls{
  margin-top:15px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.controls .row{
  display:flex;
  justify-content:center;
  gap:10px;
}

.btn{
  width:70px;
  height:60px;
  font-size:22px;
  border:none;
  border-radius:12px;
  background:#00ff00;
  color:black;
  font-weight:bold;
  cursor:pointer;
  box-shadow:0 0 20px #00ff00;
  transition:0.2s;
}

.btn:active{
  transform:scale(0.9);
}

@media(min-width:800px){
  .controls{display:none;}
}
</style>
</head>

<body>

<h2>üêç MR7 Snake Game</h2>

<div id="scoreBox">
  Score: <span id="score">0</span> |
  High Score: <span id="highscore">0</span>
</div>

<canvas id="game" width="420" height="420"></canvas>

<!-- Mobile Controls -->
<div class="controls">
  <div class="row">
    <button class="btn" onclick="setDir('UP')">‚¨Ü</button>
  </div>
  <div class="row">
    <button class="btn" onclick="setDir('LEFT')">‚¨Ö</button>
    <button class="btn" onclick="setDir('DOWN')">‚¨á</button>
    <button class="btn" onclick="setDir('RIGHT')">‚û°</button>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const box = 20;
const gridCount = canvas.width / box;

let snake = [{x: 10*box, y: 10*box}];
let direction = "RIGHT";

let food = randomFood();
let score = 0;

let highScore = localStorage.getItem("mr7_snake_highscore")
  ? parseInt(localStorage.getItem("mr7_snake_highscore"))
  : 0;

document.getElementById("highscore").innerText = highScore;

function randomFood(){
  return {
    x: Math.floor(Math.random() * gridCount) * box,
    y: Math.floor(Math.random() * gridCount) * box
  };
}

document.addEventListener("keydown", (e)=>{
  if(e.key==="ArrowLeft") setDir("LEFT");
  if(e.key==="ArrowUp") setDir("UP");
  if(e.key==="ArrowRight") setDir("RIGHT");
  if(e.key==="ArrowDown") setDir("DOWN");
});

function setDir(dir){
  if(dir==="LEFT" && direction!=="RIGHT") direction="LEFT";
  if(dir==="RIGHT" && direction!=="LEFT") direction="RIGHT";
  if(dir==="UP" && direction!=="DOWN") direction="UP";
  if(dir==="DOWN" && direction!=="UP") direction="DOWN";
}

function drawGrid(){
  ctx.strokeStyle = "#003300";
  for(let i=0;i<=gridCount;i++){
    ctx.beginPath();
    ctx.moveTo(i*box,0);
    ctx.lineTo(i*box,canvas.height);
    ctx.stroke();

    ctx.beginPath();
    ctx.moveTo(0,i*box);
    ctx.lineTo(canvas.width,i*box);
    ctx.stroke();
  }
}

function drawSnake(){
  for(let i=0;i<snake.length;i++){
    let part = snake[i];

    // Glow effect
    ctx.shadowBlur = 15;
    ctx.shadowColor = "#00ff00";

    if(i===0){
      // head
      ctx.fillStyle = "#00ff00";
    } else {
      // body
      ctx.fillStyle = "#00cc00";
    }

    ctx.fillRect(part.x, part.y, box, box);

    // border effect
    ctx.shadowBlur = 0;
    ctx.strokeStyle = "#000";
    ctx.strokeRect(part.x, part.y, box, box);
  }
}

function drawFood(){
  ctx.shadowBlur = 20;
  ctx.shadowColor = "red";
  ctx.fillStyle = "red";
  ctx.beginPath();
  ctx.arc(food.x + box/2, food.y + box/2, box/2.2, 0, Math.PI*2);
  ctx.fill();
  ctx.shadowBlur = 0;
}

function collision(head, arr){
  for(let i=0;i<arr.length;i++){
    if(head.x===arr[i].x && head.y===arr[i].y){
      return true;
    }
  }
  return false;
}

function update(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawGrid();
  drawFood();
  drawSnake();

  let headX = snake[0].x;
  let headY = snake[0].y;

  if(direction==="LEFT") headX -= box;
  if(direction==="RIGHT") headX += box;
  if(direction==="UP") headY -= box;
  if(direction==="DOWN") headY += box;

  // Game over wall
  if(headX < 0 || headY < 0 || headX >= canvas.width || headY >= canvas.height){
    gameOver();
    return;
  }

  let newHead = {x: headX, y: headY};

  // Game over self hit
  if(collision(newHead, snake)){
    gameOver();
    return;
  }

  // Eat food
  if(headX === food.x && headY === food.y){
    score++;
    document.getElementById("score").innerText = score;

    if(score > highScore){
      highScore = score;
      localStorage.setItem("mr7_snake_highscore", highScore);
      document.getElementById("highscore").innerText = highScore;
    }

    food = randomFood();
  } else {
    snake.pop();
  }

  snake.unshift(newHead);
}

function gameOver(){
  alert("Game Over! Score: " + score);

  score = 0;
  document.getElementById("score").innerText = score;

  snake = [{x: 10*box, y: 10*box}];
  direction = "RIGHT";
  food = randomFood();
}

setInterval(update, 90);
</script>

</body>
</html>
